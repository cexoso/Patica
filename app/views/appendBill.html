<section>
    <header class="modal-header">
        <h3 class="modal-title">手动录单</h3>
    </header>
    <article class="modal-body">
        <form class="form-horizontal" ng-controller="appendBillFormController">
            <fieldset>
                <legend>订单信息</legend>
                <div class="form-group">
                    <label class="col-sm-2 control-label">下单时间</label>
                    <div class="col-sm-4">
                        <div class="input-group">
                            <input type="date" ng-readonly="true" ng-click="open($event)" class="form-control" current-text='今天' clear-text='清除' datepicker-popup ng-model="oi.ordertime" is-open="status.opened" datepicker-options="dateOptions" close-text="关闭" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event)"> <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <label class="col-sm-2 control-label">工程师</label>
                    <div class="col-sm-4">
                        <ui-select ng-model="oi.engineer" theme="bootstrap">
                            <ui-select-match allow-clear="true" placeholder="选择工程师">{{$select.selected.name}}</ui-select-match>
                            <ui-select-choices repeat="engineer in engineers | propsFilter: {name: $select.search, code: $select.search}">
                                <div>
                                    名字:
                                    <span ng-bind-html="''+engineer.name | highlight: $select.search"></span>
                                </div>
                                <small>
                                    编码:
                                    <span ng-bind-html="''+engineer.code | highlight: $select.search"></span>
                                </small>
                            </ui-select-choices>
                        </ui-select>
                    </div>

                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">订单状态</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.status" ng-disabled="oi.engineer==null" ng-options="status.id as status.name for status in statuss">
                            <option value=""></option>
                        </select>
                    </div>
                    <label for="order_id" class="col-sm-2 control-label">客户来源</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.ordersource" ng-options="source.id as source.name for source in sources">
                            <option value=""></option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">服务单号</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" ng-model="oi.serviceCode" placeholder="服务单号"></div>
                    <label for="order_id" class="col-sm-2 control-label">IMEI</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control"  ng-model="oi.IMEI" placeholder="IMEI"></div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">券号</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" ng-model="oi.ticketCode" placeholder="券号"></div>
                    <label class="col-sm-2 control-label">订单类型</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.order_type" ng-options="orderType.id as orderType.name for orderType in orderTypes">
                            <option value=""></option>
                        </select>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend>手机信息</legend>
                <div class="form-group">
                    <label class="col-sm-2 control-label">手机品牌</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.brand" ng-options="brand.id as brand.name for brand in brands"></select>
                    </div>
                    <label class="col-sm-2 control-label">手机型号</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.brand_model" ng-options="brandModel.id as brandModel.name for brandModel in brandModels"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" >手机颜色</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.colorName" ng-options="color.name as color.name for color in colors"></select>
                    </div>
                    <label class="col-sm-2 control-label" >一级故障</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.trouble_type" ng-options="trouble.id as trouble.name for trouble in troubles"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">二级故障</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.trouble_type_detail" ng-options="troubleDetail.id as troubleDetail.name for troubleDetail in troubleDetails"></select>
                    </div>
                    <label class="col-sm-2 control-label">实收:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" ng-model="oi.actual_price" placeholder="实收费用"></div>
                </div>
            </fieldset>
            <fieldset>
                <legend>用户信息</legend>
                <div class="form-group">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" ng-model="oi.user_real_name" placeholder="姓名"></div>
                    <label class="col-sm-2 control-label">手机号</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" ng-model="oi.user_phone" placeholder="手机号"></div>
                </div>
                <div class="form-group">
                    <label for="order_id" class="col-sm-2 control-label">城市</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.user_city" ng-options="user_city.cityName as user_city.cityName for user_city in user_citys"></select>
                    </div>
                    <label for="order_id" class="col-sm-2 control-label">区域</label>
                    <div class="col-sm-4">
                        <select class='form-control' ng-model="oi.user_area" ng-options="user_area.region as user_area.region for user_area in user_areas"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="order_id" class="col-sm-2 control-label">地址</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" ng-model="oi.address_desc" placeholder="地址"></div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">上门日期</label>
                    <div class="col-sm-4">
                        <div class="input-group">
                            <input type="date" class="form-control" current-text='今天' clear-text='清除' datepicker-popup ng-model="oi.user_repair_date" is-open="status.ondoor_opened" datepicker-options="dateOptions" close-text="关闭" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="ondoor_open($event)"> <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <label for="order_id" class="col-sm-2 control-label">上门时间</label>
                    <div class="col-sm-4">
                        <!-- <timepicker ng-model="oi.user_repair_time_slot" ng-change="changed()" hour-step="1" minute-step="15" show-meridian="false"></timepicker>
                    -->
                    <input type="text" class="form-control" placeholder="上门时间段,类似:9-11 9:30" ng-model="oi.user_repair_time_slot"></div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">备注</label>
                <div class="col-sm-10">
                    <textarea class="form-control" ng-model="oi.remark" ></textarea>
                </div>
            </div>
        </fieldset>
    </form>
</article>
<footer class="modal-footer">
    <button class="btn btn-primary" ng-click="ok()">添加</button>
    <button class="btn btn-warning" ng-click="cancel()">退出</button>
</footer>
</section>